(function(){"use strict";var e=typeof window!="undefined"?window:global;if(typeof e.require=="function")return;var t={},n={},r=function(e,t){return{}.hasOwnProperty.call(e,t)},i=function(e,t){var n=[],r,i;/^\.\.?(\/|$)/.test(t)?r=[e,t].join("/").split("/"):r=t.split("/");for(var s=0,o=r.length;s<o;s++)i=r[s],i===".."?n.pop():i!=="."&&i!==""&&n.push(i);return n.join("/")},s=function(e){return e.split("/").slice(0,-1).join("/")},o=function(t){return function(n){var r=s(t),o=i(r,n);return e.require(o)}},u=function(e,t){var r={id:e,exports:{}};t(r.exports,o(e),r);var i=n[e]=r.exports;return i},a=function(e){var s=i(e,".");if(r(n,s))return n[s];if(r(t,s))return u(s,t[s]);var o=i(s,"./index");if(r(n,o))return n[o];if(r(t,o))return u(o,t[o]);throw new Error('Cannot find module "'+e+'"')},f=function(e,n){if(typeof e=="object")for(var i in e)r(e,i)&&(t[i]=e[i]);else t[e]=n};e.require=a,e.require.define=f,e.require.register=f,e.require.brunch=!0})(),window.require.register("application",function(e,t,n){var r,i,s,o,u,a,f={}.hasOwnProperty,l=function(e,t){function r(){this.constructor=e}for(var n in t)f.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};i=t("chaplin"),s=t("controllers/header-controller"),o=t("views/layout"),u=t("mediator"),a=t("routes"),n.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return l(t,e),t.prototype.title="Brunch example application",t.prototype.initialize=function(){return t.__super__.initialize.apply(this,arguments),this.initDispatcher({controllerSuffix:"-controller"}),this.initLayout(),this.initMediator(),this.initControllers(),this.initRouter(a),typeof Object.freeze=="function"?Object.freeze(this):void 0},t.prototype.initLayout=function(){return this.layout=new o({title:this.title})},t.prototype.initControllers=function(){return new s},t.prototype.initMediator=function(){return u.seal()},t}(i.Application)}),window.require.register("collections/brackets/games",function(e,t,n){var r,i,s,o=function(e,t){return function(){return e.apply(t,arguments)}},u={}.hasOwnProperty,a=function(e,t){function r(){this.constructor=e}for(var n in t)u.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};r=t("models/base/collection"),i=t("models/brackets/game"),n.exports=s=function(e){function t(){return this.parse=o(this.parse,this),this.next=o(this.next,this),t.__super__.constructor.apply(this,arguments)}return a(t,e),t.prototype.model=i,t.prototype.comparator=function(e){return e.get("number")},t.prototype.next=function(e){var t,n;return e==null&&(e=null),t=this.find(function(e){return e.get("status")==="underway"||e.get("starts_at")==null}),n=this.firstReady(),e!=null&&t!=null&&t.endWithWinner(_.pick(e.attributes,"id","name")),t},t.prototype.firstReady=function(){return this.find(function(e){return e.get("status")==="ready"&&e.get("starts_at")==null})},t.prototype.parse=function(e){var t,n,r,s;n=[];for(t=r=0,s=e.length;0<=s?r<s:r>s;t=0<=s?++r:--r)this.at(t)!=null?(n[t]=this.at(t),n[t].parse(e[t])):n[t]=new i(e[t]);return n},t}(r)}),window.require.register("collections/brackets/group-stages",function(e,t,n){var r,i,s,o={}.hasOwnProperty,u=function(e,t){function r(){this.constructor=e}for(var n in t)o.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};r=t("models/base/collection"),i=t("models/brackets/group-stage"),n.exports=s=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return u(t,e),t.prototype.model=i,t}(r)}),window.require.register("collections/brackets/matches",function(e,t,n){var r,i,s,o=function(e,t){return function(){return e.apply(t,arguments)}},u={}.hasOwnProperty,a=function(e,t){function r(){this.constructor=e}for(var n in t)u.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};r=t("models/base/collection"),i=t("models/brackets/match"),n.exports=s=function(e){function t(){return this.parse=o(this.parse,this),t.__super__.constructor.apply(this,arguments)}return a(t,e),t.prototype.model=i,t.prototype.initialize=function(e){return t.__super__.initialize.call(this,e)},t.prototype.parse=function(e){var t,n,r,s,o,u,a,f,l,c,h;f=[];for(l=0,c=e.length;l<c;l++)o=e[l],s=this.get(o.id),s!=null?(s.parse(o),f.push(s)):(a=new i,a.parse(o),f.push(a));for(r in f)o=f[r],f[o.get("parent")]!=null?f[r].set("parent",f[o.get("parent")]):o.set("parent",null),f[(h=o.get("loserDropsTo"))!=null?h.match:void 0]!=null?o.set("loserDropsTo",{match:f[o.get("loserDropsTo").match],slot:o.get("loserDropsTo").slot}):o.set("loserDropsTo",null),u=function(){var e,r;e=o.get("children"),r=[];for(n in e)t=e[n],f[t]!=null?r.push(f[t]):r.push(null);return r}(),f[r].set("children",u);return f},t}(r)}),window.require.register("collections/brackets/streams",function(e,t,n){var r,i,s,o={}.hasOwnProperty,u=function(e,t){function r(){this.constructor=e}for(var n in t)o.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};r=t("models/base/collection"),i=t("models/brackets/stream"),n.exports=s=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return u(t,e),t.prototype.model=i,t.prototype.comparator=function(e){return e.get("name")},t}(r)}),window.require.register("collections/brackets/teams",function(e,t,n){var r,i,s,o=function(e,t){return function(){return e.apply(t,arguments)}},u={}.hasOwnProperty,a=function(e,t){function r(){this.constructor=e}for(var n in t)u.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};r=t("models/base/collection"),i=t("models/brackets/team"),n.exports=s=function(e){function t(){return this.parse=o(this.parse,this),t.__super__.constructor.apply(this,arguments)}return a(t,e),t.prototype.model=i,t.prototype.parse=function(e){var t,n,r,s,o;o=[];for(t in e)s=e[t],s.id==="5088cad2f767afae2e000005"&&(s.id="tid"+t),r=this.get(s.id),r!=null?(r.set(s),o.push(r)):(n=new i,n.set(s),o.push(n));return o},t}(r)}),window.require.register("collections/tools",function(e,t,n){var r,i,s,o={}.hasOwnProperty,u=function(e,t){function r(){this.constructor=e}for(var n in t)o.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};r=t("models/base/collection"),i=t("models/tool"),n.exports=s=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return u(t,e),t.prototype.model=i,t}(r)}),window.require.register("controllers/admin-controller",function(e,t,n){var r,i,s,o,u,a,f,l,c,h,p,d=function(e,t){return function(){return e.apply(t,arguments)}},v={}.hasOwnProperty,m=function(e,t){function r(){this.constructor=e}for(var n in t)v.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};f=t("controllers/base/controller"),i=t("views/admin-workspace-view"),r=t("models/admin-workspace"),h=t("collections/tools"),o=t("models/brackets/bracket"),a=t("views/bracket-editor-view"),p=t("mediator"),c=t("views/open-menu-view"),u=t("utility/brackets/bracket-urls"),l=t("utility/mcclane"),n.exports=s=function(e){function t(){return this.loadConfig=d(this.loadConfig,this),this.bracketLoaded=d(this.bracketLoaded,this),t.__super__.constructor.apply(this,arguments)}return m(t,e),t.prototype.index=function(){var e=this;return this.bracket=new o,this.loadConfig({success:function(t){return e.config=t,e.bracketLoaded()},error:function(e,t){return console.log("could not load config")}})},t.prototype.editBracket=function(e){var t=this;return this.bracket=new o,this.loadConfig({success:function(n){return t.config=n,t.bracketLoaded(),t.bracket.fetch({url:u.apiBase+"/brackets/v6/api/"+e.slug,success:function(e){return t.bracketView.render()}})},error:function(e,t){return console.log("could not load config")}})},t.prototype.bracketLoaded=function(){var e;return e={domain:".ign.com"},$.cookies.set(this.config.authKey,this.config.authSecret,e),this.tools=new h,l.model=this.bracket,this.workspaceView=new i({collection:this.tools,model:this.bracket}),this.bracketView=new a({model:this.bracket})},t.prototype.loadConfig=function(e){return e.url="/brackets/v6/admin/javascripts/config.json",$.ajax(e)},t}(f)}),window.require.register("controllers/base/controller",function(e,t,n){var r,i,s={}.hasOwnProperty,o=function(e,t){function r(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};r=t("chaplin"),n.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return o(t,e),t}(r.Controller)}),window.require.register("controllers/header-controller",function(e,t,n){var r,i,s,o={}.hasOwnProperty,u=function(e,t){function r(){this.constructor=e}for(var n in t)o.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};r=t("controllers/base/controller"),s=t("views/header-view"),n.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return u(t,e),t.prototype.initialize=function(){return t.__super__.initialize.apply(this,arguments),this.view=new s},t}(r)}),window.require.register("controllers/open-controller",function(e,t,n){var r,i,s,o={}.hasOwnProperty,u=function(e,t){function r(){this.constructor=e}for(var n in t)o.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};r=t("controllers/base/controller"),i=t("views/open-menu-view"),n.exports=s=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return u(t,e),t.prototype.index=function(){return this.view=new i},t}(r)}),window.require.register("initialize",function(e,t,n){var r;r=t("application"),$(function(){var e;return e=new r,e.initialize()})}),window.require.register("lib/support",function(e,t,n){var r,i,s;r=t("chaplin"),s=t("lib/utils"),i=s.beget(r.support),n.exports=i}),window.require.register("lib/utils",function(e,t,n){var r,i;r=t("chaplin"),i=r.utils.beget(r.utils),n.exports=i}),window.require.register("lib/view-helper",function(e,t,n){var r;r=t("mediator"),Handlebars.registerHelper("with",function(e,t){return!e||Handlebars.Utils.isEmpty(e)?t.inverse(this):t.fn(e)}),Handlebars.registerHelper("without",function(e,t){var n;return n=t.inverse,t.inverse=t.fn,t.fn=n,Handlebars.helpers["with"].call(this,e,t)})}),window.require.register("mediator",function(e,t,n){n.exports=t("chaplin").mediator}),window.require.register("models/admin-tools",function(e,t,n){var r,i,s,o={}.hasOwnProperty,u=function(e,t){function r(){this.constructor=e}for(var n in t)o.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};i=t("models/base/model"),s=t("models/single-elim-wizard"),n.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return u(t,e),t.prototype.initialize=function(){return this.set("wizard",new s)},t}(i)}),window.require.register("models/admin-workspace",function(e,t,n){var r,i,s,o={}.hasOwnProperty,u=function(e,t){function r(){this.constructor=e}for(var n in t)o.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};s=t("models/base/model"),i=t("models/brackets/bracket"),n.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return u(t,e),t.prototype.initialize=function(e){return t.__super__.initialize.call(this,e)},t}(s)}),window.require.register("models/base/collection",function(e,t,n){var r,i,s,o={}.hasOwnProperty,u=function(e,t){function r(){this.constructor=e}for(var n in t)o.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};r=t("chaplin"),s=t("models/base/model"),n.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return u(t,e),t.prototype.model=s,t}(r.Collection)}),window.require.register("models/base/model",function(e,t,n){var r,i,s={}.hasOwnProperty,o=function(e,t){function r(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};r=t("chaplin"),n.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return o(t,e),t}(r.Model)}),window.require.register("models/brackets/bracket",function(e,t,n){var r,i,s,o,u,a,f=function(e,t){return function(){return e.apply(t,arguments)}},l={}.hasOwnProperty,c=function(e,t){function r(){this.constructor=e}for(var n in t)l.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};o=t("models/base/model"),s=t("collections/brackets/matches"),a=t("collections/brackets/teams"),i=t("collections/brackets/group-stages"),u=t("utility/brackets/random-string"),n.exports=r=function(e){function t(){return this.parse=f(this.parse,this),t.__super__.constructor.apply(this,arguments)}return c(t,e),t.prototype.defaults=function(){return{users:[],sessionId:null,title:"Your Title",date:moment().format("YYYY-MM-DDTHH:mm:ssZ"),slug:u.get(),franchise:"",kind:"ipl6",labels:[],matches:new s,groups:new i,teams:new a}},t.prototype.initialize=function(e){return t.__super__.initialize.call(this,e)},t.prototype.parse=function(e){return this.set(_.omit(e,"teams","groups","matches")),this.get("teams").update(e.teams,{parse:!0}),this.get("teams").trigger("sync"),this.get("matches").update(e.matches,{parse:!0}),this.get("groups"),{}},t}(o)}),window.require.register("models/brackets/event",function(e,t,n){var r,i,s,o=function(e,t){return function(){return e.apply(t,arguments)}},u={}.hasOwnProperty,a=function(e,t){function r(){this.constructor=e}for(var n in t)u.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};s=t("models/base/model"),i=t("models/brackets/matchup"),n.exports=r=function(e){function t(){return this.autoTitle=o(this.autoTitle,this),this.toJSON=o(this.toJSON,this),t.__super__.constructor.apply(this,arguments)}return a(t,e),t.prototype.defaults=function(){return{title:"TBD vs. TBD",stream:null,starts_at:moment(String(moment().year()),"YYYY").format("MM/DD/YYYY hh:mm aZ"),ends_at:moment(String(moment().year()),"YYYY").add("hours",1).format("MM/DD/YYYY hh:mm aZ"),rebroadcast:!1,matchup:new i,groups:[{id:"5100451909f67b42a8000002",name:"StarCraft II",slug:"starcraft-2",image_url:"http://media.ign.com/ev/esports/ipl-static/shared/images/logos/franchises/starcraft-2.png"}]}},t.prototype.initialize=function(e){return t.__super__.initialize.call(this,e),this.urlRoot=function(){return"http://esports.ign.com/content/v2/events"}},t.prototype.toJSON=function(){var e;return e=_.clone(this.attributes),e.starts_at=moment(e.starts_at,"MM/DD/YYYY hh:mm aZ").format("YYYY-MM-DDTHH:mm:ssZ"),e},t.prototype.parse=function(e){return e.success!=null&&Boolean(e.success)===!0?{}:(this.set("starts_at",moment(e.starts_at,"YYYY-MM-DDTHH:mm:ssZ").format("MM/DD/YYYY hh:mm aZ")),this.set(_.omit(e,"matchup","starts_at")),this.get("matchup").parse(e.matchup),{})},t.prototype.autoTitle=function(){var e,t;return t=function(){var t,n;n=[];for(e=t=0;t<2;e=++t)this.get("matchup").get("teams")[e]!=null?n.push(this.get("matchup").get("teams")[e].get("name")):n.push("TBD");return n}.call(this),this.set("title",t.join(" vs. "))},t}(s)}),window.require.register("models/brackets/game",function(e,t,n){var r,i,s=function(e,t){return function(){return e.apply(t,arguments)}},o={}.hasOwnProperty,u=function(e,t){function r(){this.constructor=e}for(var n in t)o.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};i=t("models/base/model"),n.exports=r=function(e){function t(){return this.parse=s(this.parse,this),this.start=s(this.start,this),this.endWithWinner=s(this.endWithWinner,this),t.__super__.constructor.apply(this,arguments)}return u(t,e),t.prototype.defaults=function(){return{number:0,status:"ready"}},t.prototype.initialize=function(e){return t.__super__.initialize.call(this,e),this.urlRoot=function(){return"http://esports.ign.com/content/v2/games"}},t.prototype.endWithWinner=function(e){return this.set("winner",{id:e.id,name:e.name}),this.set("ends_at",moment().format("YYYY-MM-DDTHH:mm:ssZ")),this.set("status","finished")},t.prototype.start=function(){return this.set("status","underway"),this.set("starts_at",moment().format("YYYY-MM-DDTHH:mm:ssZ"))},t.prototype.parse=function(e){return e.success!=null&&Boolean(e.success)===!0?{}:(this.set(e),this.get("status")==="ready"&&this.get("starts_at")!=null&&this.set("status","underway"),{})},t}(i)}),window.require.register("models/brackets/group-stage",function(e,t,n){var r,i,s,o,u={}.hasOwnProperty,a=function(e,t){function r(){this.constructor=e}for(var n in t)u.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};s=t("models/base/model"),i=t("collections/brackets/matches"),o=t("collections/brackets/teams"),n.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return a(t,e),t.prototype.defaults=function(){return{title:"Group",teams:new o,matches:new i,teamWL:{},advanceTo:[],finished:!1,transform2d:{x:0,y:0,paddingX:0,paddingY:0}}},t}(s)}),window.require.register("models/brackets/match-team",function(e,t,n){var r,i,s=function(e,t){return function(){return e.apply(t,arguments)}},o={}.hasOwnProperty,u=function(e,t){function r(){this.constructor=e}for(var n in t)o.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};i=t("models/base/model"),n.exports=r=function(e){function t(){return this.toJSON=s(this.toJSON,this),t.__super__.constructor.apply(this,arguments)}return u(t,e),t.prototype.defaults=function(){return{name:"TBD",points:0,seed:0}},t.prototype.initialize=function(e){return t.__super__.initialize.call(this,e),this.set("points",0)},t.prototype.toJSON=function(){var e;e=_.clone(this.attributes);if(e.id!=null&&e.id.match(/^tid\d/)||e.name==="TBD")e.id="5088cad2f767afae2e000005";return e},t}(i)}),window.require.register("models/brackets/match",function(e,t,n){var r,i,s,o,u=function(e,t){return function(){return e.apply(t,arguments)}},a={}.hasOwnProperty,f=function(e,t){function r(){this.constructor=e}for(var n in t)a.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};o=t("models/base/model"),r=t("models/brackets/event"),s=t("models/brackets/match-team"),n.exports=i=function(e){function t(){return this.games=u(this.games,this),this.event=u(this.event,this),this.matchup=u(this.matchup,this),this.team=u(this.team,this),this.teams=u(this.teams,this),this.started=u(this.started,this),this.noTBDs=u(this.noTBDs,this),this.isLoser=u(this.isLoser,this),this.advance=u(this.advance,this),this.toJSON=u(this.toJSON,this),t.__super__.constructor.apply(this,arguments)}return f(t,e),t.prototype.defaults=function(){return{parent:null,children:[],loserDropsTo:null,hasLoserSlot:!1,event:new r,transform2d:{x:0,y:0,paddingX:0,paddingY:0},teamOrder:[]}},t.prototype.initialize=function(e){return t.__super__.initialize.call(this,e)},t.prototype.parse=function(e){return this.get("event").parse(e.event),this.set(_.omit(e,"event")),{}},t.prototype.toJSON=function(){var e,t;return e=_.clone(this.attributes),e.id="mid"+_.indexOf(this.collection.models,this),e.parent=e.parent!=null?_.indexOf(this.collection.models,e.parent):null,e.children=function(){var n,r,i;i=[];for(t=n=0,r=e.children.length;0<=r?n<r:n>r;t=0<=r?++n:--n)e.children[t]!=null?i.push(_.indexOf(this.collection.models,e.children[t])):i.push(null);return i}.call(this),e.loserDropsTo!=null?e.loserDropsTo.match=_.indexOf(this.collection.models,e.loserDropsTo.match):e.loserDropsTo=null,this.set("id",e.id),e},t.prototype.advance=function(e){var t,n,r,i;return r=this.get("parent"),i=[],r!=null&&(r.team(r.whichSlot(this),new s(e.attributes)),r.event().autoTitle(),i.push(r)),n=this.get("loserDropsTo"),n!=null&&(t=this.teams()[0].get("name")===e.get("name")?this.teams()[1]:this.teams()[0],n.match.team(n.slot,new s(t.attributes)),n.match.event().autoTitle(),i.push(n.match)),i},t.prototype.whichSlot=function(e){return _.contains(this.get("children"),e)?this.get("hasLoserSlot")||this.get("children").length===1?1:_.indexOf(this.get("children"),e):0},t.prototype.isLoser=function(){return this.get("hasLoserSlot")?!0:!1},t.prototype.noTBDs=function(){var e,t=this;return e=_.find(this.teams(),function(e){return e.get("name")==="TBD"||e.get("name").match(/TBD$/)!=null||e.id==="5088cad2f767afae2e000005"}),e==null},t.prototype.started=function(){var e;return e=this.games().find(function(e){return e.get("starts_at")!=null}),e!=null},t.prototype.teams=function(e){return e!=null&&this.get("event").get("matchup").set("teams",e),this.get("event").get("matchup").get("teams")},t.prototype.team=function(e,t){return t==null&&(t=null),t!=null&&(this.teams()[e]=t,this.matchup().trigger("change:teams")),this.teams()[e]},t.prototype.matchup=function(){return this.get("event").get("matchup")},t.prototype.event=function(){return this.get("event")},t.prototype.games=function(){return this.matchup().get("games")},t}(o)}),window.require.register("models/brackets/matchup",function(e,t,n){var r,i,s,o,u,a=function(e,t){return function(){return e.apply(t,arguments)}},f={}.hasOwnProperty,l=function(e,t){function r(){this.constructor=e}for(var n in t)f.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};u=t("models/base/model"),r=t("models/brackets/game"),i=t("collections/brackets/games"),s=t("models/brackets/match-team"),n.exports=o=function(e){function t(){return this.reset=a(this.reset,this),this.pointFor=a(this.pointFor,this),this.updateGamesCount=a(this.updateGamesCount,this),t.__super__.constructor.apply(this,arguments)}return l(t,e),t.prototype.defaults=function(){return{teams:[],games:new i,best_of:3}},t.prototype.initialize=function(e){var n=this;return t.__super__.initialize.call(this,e),this.urlRoot=function(){return"http://esports.ign.com/content/v2/matchups"},this.updateGamesCount(),this.on("change:best_of",function(){return n.updateGamesCount()})},t.prototype.parse=function(e){var t,n,r,i,o;return e.success!=null&&Boolean(e.success)===!0?{}:(e.teams!=null&&(this.get("teams").length>1&&this.get("teams")[0].id!=null&&(t=this.get("teams")[0].id,t!==e.teams[0].id&&!t.match(/^tid\d/)&&(e.teams=e.teams.reverse())),e.teams.length<2&&e.teams.push({name:"TBD",points:0})),i=function(){var t,i;t=e.teams,i=[];for(n in t)o=t[n],r=this.get("teams"),r[n]!=null?i.push(r[n].set(o)):(r[n]=new s(o),i.push(r[n].set("points",o.points)));return i}.call(this),this.get("games").update(e.games,{parse:!0}),this.set(_.omit(e,"teams","games")),{})},t.prototype.updateGamesCount=function(){var e,t,n;return e=this.get("best_of"),t=function(){var t,i;i=[];for(n=t=0;0<=e?t<e:t>e;n=0<=e?++t:--t)i.push(new r({number:n+1}));return i}(),this.get("games").reset(t)},t.prototype.pointFor=function(e){var t,n,r,i;i=this.get("teams");for(n=0,r=i.length;n<r;n++){t=i[n];if(t.get("name")!==e)continue;return t.set("points",t.get("points")+1),t.get("points")>this.get("best_of")/2?{winner:t,matchDecided:!0}:{winner:t,matchDecided:!1}}},t.prototype.reset=function(){return this.get("games").each(function(e){return e.unset("winner"),e.set("status","ready")}),_.each(this.get("teams"),function(e){return e.set("points",0)})},t}(u)}),window.require.register("models/brackets/stream",function(e,t,n){var r,i,s={}.hasOwnProperty,o=function(e,t){function r(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};r=t("models/base/model"),n.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return o(t,e),t}(r)}),window.require.register("models/brackets/team",function(e,t,n){var r,i,s={}.hasOwnProperty,o=function(e,t){function r(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};r=t("models/base/model"),n.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return o(t,e),t.prototype.defaults=function(){return{name:"TBD",image_url:"",seed:0}},t.prototype.initialize=function(e){return t.__super__.initialize.call(this,e),this.urlRoot=function(){return"http://esports.ign.com/content/v2/teams"}},t}(r)}),window.require.register("models/double-elim-generator",function(e,t,n){var r,i,s,o,u,a,f,l,c,h=function(e,t){return function(){return e.apply(t,arguments)}},p={}.hasOwnProperty,d=function(e,t){function r(){this.constructor=e}for(var n in t)p.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};f=t("models/base/model"),u=t("models/brackets/match"),o=t("utility/huffman-code"),a=t("utility/match-from-parent"),l=t("utility/brackets/root-finder"),c=t("utility/brackets/rounds-from-match-list"),s=t("utility/brackets/flatten-tree"),r=t("utility/auto-advance"),n.exports=i=function(e){function t(){return this.generate=h(this.generate,this),t.__super__.constructor.apply(this,arguments)}return d(t,e),t.prototype.generate=function(e,t){var n,r,i,f,h,p,d,v,m,g,y,b,w,E,S,x,T;v=Math.pow(2,Math.ceil(Math.log(e)/Math.log(2))),y=Math.log(v)/Math.log(2),m=l.find(t),f=[],f[0]=[],f[0][0]=new u({hasLoserSlot:!0}),f[0][0].teams([o.followString(o.losersInRound(1,v)[0],m)]);for(r=b=1;1<=y?b<y:b>y;r=1<=y?++b:--b){h=o.losersInRound(r+1,v),f[r]==null&&(f[r]=[]);if(r<y-1)for(i in h)p=h[i],f[r].push(a.make(f[r-1][parseInt(parseInt(i)/2)],{hasLoserSlot:!0})),g=[o.followString(p,m)],f[r][i].teams(g);else for(i in h){p=h[i];if(parseInt(i)%2!==0)continue;d=parseInt(i),f[r].push(a.make(f[r-1][d/2],{hasLoserSlot:!0})),f[r][d/2].teams([o.followString(h[d+1],m),o.followString(h[d],m)])}}for(r=w=0,S=f.length;0<=S?w<S:w>S;r=0<=S?++w:--w)if(((x=f[r+1])!=null?x.length:void 0)>f[r].length)for(i=E=0,T=f[r].length;0<=T?E<T:E>T;i=0<=T?++E:--E)a.insert(f[r][i]);return n=s.flatten(f[0][0]),f=c.convert(f[0][0]),this.advanceAll(f),this.setupLoserDrops(t,f),n},t.prototype.advanceAll=function(e){var t,n,i,s,o;o=[];for(t=i=0,s=e.length;0<=s?i<s:i>s;t=0<=s?++i:--i)o.push(function(){var i,s,o;o=[];for(n=i=0,s=e[t].length;0<=s?i<s:i>s;n=0<=s?++i:--i)o.push(r.on(e[t][n],"seed"));return o}());return o},t.prototype.setupLoserDrops=function(e,t){var n,r,i,s,o;o=[];for(i=0,s=e.length;i<s;i++)r=e[i],n=r.team(1).get("seed"),o.push(r.set("loserDropsTo",this.findFirst(n,t)));return o},t.prototype.findFirst=function(e,t){var n,r,i,s,o,u,a;for(n=s=0,u=t.length;0<=u?s<u:s>u;n=0<=u?++s:--s)for(r=o=0,a=t[n].length;0<=a?o<a:o>a;r=0<=a?++o:--o){i=t[n][r].teams();if(_.find(i,function(t){return t.get("seed")===e})!=null)return{match:t[n][r],slot:i[0].get("seed")===e?0:1}}},t}(f)}),window.require.register("models/group-generator",function(e,t,n){var r,i,s,o,u,a={}.hasOwnProperty,f=function(e,t){function r(){this.constructor=e}for(var n in t)a.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};o=t("models/base/model"),i=t("models/brackets/group-stage"),u=t("collections/brackets/teams"),s=t("collections/brackets/matches"),n.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return f(t,e),t.prototype.newGroup=function(e){var t,n,r,o,a,f,l;r=new u,n=new s;if(e.numTeams!=null)for(t=o=0,f=parseInt(e.numTeams);0<=f?o<f:o>f;t=0<=f?++o:--o)r.add({name:"Team X"+(t+1),seed:t+1});if(e.numMatches!=null)for(t=a=0,l=parseInt(e.numMatches);0<=l?a<l:a>l;t=0<=l?++a:--a)n.add({bestOf:1});return e.teams=r,e.matches=n,new i(_.omit(e,"numTeams","numMatches"))},t}(o)}),window.require.register("models/match-mutator",function(e,t,n){var r,i,s=function(e,t){return function(){return e.apply(t,arguments)}},o={}.hasOwnProperty,u=function(e,t){function r(){this.constructor=e}for(var n in t)o.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};r=t("models/brackets/match"),n.exports=i=function(e){function t(){return this.advance=s(this.advance,this),t.__super__.constructor.apply(this,arguments)}return u(t,e),t.prototype.initialize=function(){return t.__super__.initialize.apply(this,arguments),this.on("change",this.showChanges),this.selected=[],this.ignore=["transform2d","parent","children","loserDropsTo","hasLoserSlot"]},t.prototype.advance=function(e){return _.first(this.selected).advance(e)},t.prototype.showChanges=function(){var e,t,n,r,i,s,o;s=this.selected,o=[];for(r=0,i=s.length;r<i;r++)t=s[r],o.push(function(){var r,i;r=_.omit(this.changed,this.ignore),i=[];for(e in r)n=r[e],i.push(t.set(e,_.clone(this.get(e))));return i}.call(this));return o},t.prototype.newAttrs=function(){return this.stopListening(),this.listenTo(this.get("event"),"change",this.eventChange),this.listenTo(this.matchup(),"change",this.matchupChange)},t.prototype.matchupChange=function(){var e,t,n,r,i,s,o;s=_.tail(this.selected),o=[];for(r=0,i=s.length;r<i;r++)t=s[r],o.push(function(){var r,i;r=_.omit(this.matchup().changed,this.ignore),i=[];for(e in r)n=r[e],i.push(t.matchup().set(e,_.clone(this.matchup().get(e))));return i}.call(this));return o},t.prototype.eventChange=function(){var e,t,n,r,i,s,o;s=_.tail(this.selected),o=[];for(r=0,i=s.length;r<i;r++)t=s[r],o.push(function(){var r,i;r=_.omit(this.get("event").changed,this.ignore),i=[];for(e in r)n=r[e],i.push(t.get("event").set(e,_.clone(this.get("event").get(e))));return i}.call(this));return o},t}(r)}),window.require.register("models/single-elim-wizard",function(e,t,n){var r,i,s,o,u,a,f=function(e,t){return function(){return e.apply(t,arguments)}},l={}.hasOwnProperty,c=function(e,t){function r(){this.constructor=e}for(var n in t)l.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};o=t("models/base/model"),r=t("models/brackets/bracket"),i=t("models/brackets/match"),s=t("models/brackets/match-team"),a=t("models/brackets/team"),n.exports=u=function(e){function t(){return this.makeMatches=f(this.makeMatches,this),this.makeTeams=f(this.makeTeams,this),this.generate=f(this.generate,this),t.__super__.constructor.apply(this,arguments)}return c(t,e),t.prototype.defaults={matchBuffer:[],numPlayers:4,type:"single-elim"},t.prototype.generate=function(){var e,t,n;return this.set("matchBuffer",[]),t=Math.pow(2,Math.ceil(Math.log(this.get("numPlayers"))/Math.log(2))),e=Math.ceil(Math.log(this.get("numPlayers"))/Math.log(2)),n=new i,n.teams([new s({seed:1}),new s({seed:2})]),this.get("matchBuffer").push(n),this.makeMatches(n,0,e-1),_.each(this.get("matchBuffer"),function(e){return _.each(e.teams(),function(e){return e.set("name","TBD")})}),this.get("matchBuffer")},t.prototype.makeTeams=function(){var e,t,n,r,i;t=[],i=[];for(e=n=0,r=this.get("numPlayers");0<=r?n<r:n>r;e=0<=r?++n:--n)i.push(t[e]=new a({seed:e+1,name:e+1+" TBD",id:"tid"+e}));return i},t.prototype.makeMatches=function(e,t,n){var r,o,u,a,f,l;u=this.get("matchBuffer"),a=e.teams(),r=[];for(o=f=0,l=a.length;0<=l?f<l:f>l;o=0<=l?++f:--f)t<n&&(r[o]=new i({parent:e}),r[o].teams([new s({seed:a[o].get("seed")}),new s({seed:Math.pow(2,t)*4-(a[o].get("seed")-1)})]),u.push(r[o]),this.makeMatches(r[o],t+1,n));return e.set("children",r)},t}(o)}),window.require.register("models/team-auto-seeder",function(e,t,n){var r,i,s,o,u,a,f=function(e,t){return function(){return e.apply(t,arguments)}},l={}.hasOwnProperty,c=function(e,t){function r(){this.constructor=e}for(var n in t)l.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};i=t("models/base/model"),o=t("utility/brackets/rounds-from-match-list"),s=t("utility/brackets/root-finder"),a=t("mediator"),r=t("models/brackets/match-team"),n.exports=u=function(e){function t(){return this.retitleSeeds=f(this.retitleSeeds,this),this.updateTeams=f(this.updateTeams,this),this.replaceTeam=f(this.replaceTeam,this),this.seedDive=f(this.seedDive,this),this.updateSeedMatches=f(this.updateSeedMatches,this),t.__super__.constructor.apply(this,arguments)}return c(t,e),t.prototype.defaults={bracket:null,seedMatches:null,enabled:!0},t.prototype.initialize=function(e){return t.__super__.initialize.apply(this,arguments),this.set("bracket",e.bracket),this.get("bracket").get("teams").comparator=function(e){return e.get("seed")},this.listenTo(this.get("bracket").get("matches"),"reset",function(){return this.updateSeedMatches()}),this.listenTo(this.get("bracket"),"sync",function(){return this.updateSeedMatches()}),this.listenTo(this.get("bracket").get("teams"),"sort",function(){return this.updateTeams()}),this.listenTo(this.get("bracket").get("teams"),"reset",function(){return this.updateTeams()}),a.subscribe("groupAdded",function(){return!0})},t.prototype.updateSeedMatches=function(){var e,t,n;return e=this.get("bracket").get("matches"),t=s.find(e.models),n=this.seedDive(t),this.set("seedMatches",n)},t.prototype.seedDive=function(e,t){var n,r,i,s,o,u,a;t==null&&(t=[]),s=e.teams();for(r in s)i=s[r],t[i.get("seed")]={match:e,slot:r};a=e.get("children");for(o=0,u=a.length;o<u;o++)n=a[o],n.isLoser()||this.seedDive(n,t);return t},t.prototype.replaceTeam=function(e,t){var n,r,i,s,o,u,a,f,l,c,h;r=this.get("bracket").get("matches"),s=!1,c=r.models;for(u=0,f=c.length;u<f;u++)n=c[u],i=_.find(n.teams(),function(t){return t.get("name")===e.name}),i!=null&&(i.set(_.omit(t,"points")),s=!0);if(s)return;o=this.get("seedMatches"),h=[];for(a=0,l=o.length;a<l;a++){n=o[a];if(n==null)continue;i=_.find(n.match.teams(),function(t){return t.get("seed")===e.seed}),i!=null?h.push(i.set(_.omit(t,"points"))):h.push(void 0)}return h},t.prototype.updateTeams=function(){var e,t,n,i,s,o,u;if(this.get("enabled")){s=this.get("bracket").get("teams"),n=this.get("seedMatches"),o=s.models,u=[];for(e in o)i=o[e],s=_.clone(n[parseInt(e)+1].match.teams()),s[n[parseInt(e)+1].slot]=i,t=new r(i.attributes),n[parseInt(e)+1].match.team(n[parseInt(e)+1].slot,t),u.push(n[parseInt(e)+1].match.event().autoTitle());return u}},t.prototype.retitleSeeds=function(){var e,t,n,r,i;t=this.get("seedMatches"),i=[];for(n=0,r=t.length;n<r;n++)e=t[n],e!=null&&i.push(e.match.event().autoTitle());return i},t}(i)}),window.require.register("models/tool",function(e,t,n){var r,i,s={}.hasOwnProperty,o=function(e,t){function r(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};r=t("models/base/model"),n.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return o(t,e),t.prototype.defaults={label:null,slug:"tool",menu:null,logic:null},t.prototype.initialize=function(e){t.__super__.initialize.call(this,e);if(this.has("menu"))return this.get("menu").model=this.get("logic")},t}(r)}),window.require.register("routes",function(e,t,n){n.exports=function(e){return e("brackets/v6/admin","admin#index"),e("brackets/v6/admin/","admin#index"),e("brackets/v6/admin/edit/:slug","admin#editBracket"),e("brackets/v6/admin/load","open#index")}}),window.require.register("utility/auto-advance",function(e,t,n){var r,i,s;i=t("models/brackets/match"),s=t("models/brackets/match-team"),n.exports=r=function(){function e(){}return e.on=function(e,t){var n,r,i;return n=e.get("parent"),n==null?null:(r=n.whichSlot(e),i=_.min(e.teams(),function(e){return e.get(t)}),n.team(r,new s(i.attributes)))},e.team=function(e){var t;t=match.get("parent");if(t==null)return null},e}()}),window.require.register("utility/brackets/bracket-padding",function(e,t,n){var r;n.exports=r=function(){function e(){}return e.padding={top:100,right:100,bottom:100,left:100},e.match={width:180,height:44},e.matches=null,e.groups=null,e.setBracket=function(e,t){return this.$view=t,this.matches=e.get("matches"),this.groups=e.get("groups"),this},e.addPadding=function(e){var t,n;if(this.matches==null)return!1;for(t in e)n=e[t],this.padding[t]!=null&&(this.padding[t]+=parseInt(n));return this.updateBounds(),this},e.setPadding=function(e){var t,n;if(this.matches==null)return!1;for(t in e)n=e[t],this.padding[t]!=null&&(this.padding[t]=parseInt(n));return this.updateBounds(),this},e.moveMatches=function(e,t){var n=this;return t==null&&(t=0),this.matches==null?!1:(this.matches.each(function(n){var r;return r=_.clone(n.get("transform2d")),r.x+=e,r.y+=t,n.set("transform2d",r)}),this.updateBounds(),this)},e.updateBounds=function(){var e,t,n,r,i,s,o,u,a,f=this;this.groups.each(function(e){var t;return t=_.clone(e.get("transform2d")),t.paddingX=f.padding.left,t.paddingY=f.padding.top,e.set("transform2d",t)}),this.matches.each(function(e){var t;return t=_.clone(e.get("transform2d")),t.paddingX=f.padding.left,t.paddingY=f.padding.top,e.set("transform2d",t)}),t=n=0,u=this.matches.models;for(r=0,s=u.length;r<s;r++)e=u[r],e.get("transform2d").x+e.get("transform2d").paddingX>t&&(t=e.get("transform2d").x+e.get("transform2d").paddingX);a=this.matches.models;for(i=0,o=a.length;i<o;i++)e=a[i],e.get("transform2d").y+e.get("transform2d").paddingY>n&&(n=e.get("transform2d").y+e.get("transform2d").paddingY);return this.$view.css({width:t+this.padding.right+this.match.width,height:n+this.padding.bottom})},e}()}),window.require.register("utility/brackets/bracket-urls",function(e,t,n){var r;n.exports=r=function(){function e(){}return e.viewBase="http://www.ign.com/ipl/all/brackets",e.apiBase="http://esports.ign.com",e}()}),window.require.register("utility/brackets/flatten-tree",function(e,t,n){var r;n.exports=r=function(){function e(){}return e.flatten=function(e,t){var n,r,i,s;t==null&&(t=[]),t.push(e),s=e.get("children");for(r=0,i=s.length;r<i;r++)n=s[r],this.flatten(n,t);return t},e}()}),window.require.register("utility/brackets/match-connector",function(e,t,n){var r;n.exports=r=function(){function e(){}return e.connect=function(e,t){var n,r,i,s,o,u,a,f,l,c;o=this.findView(e,t),n=$('<div class="match-connector"></div>'),a=u=Math.min(Infinity),s=0,c=e.get("children");for(f=0,l=c.length;f<l;f++)r=c[f],i=this.findView(r,t),i!=null&&(a=Math.min(i.$el.position().top,a),u=Math.min(i.$el.position().left+i.$el.outerWidth(),u),s=Math.max(i.$el.position().top,s)),!0;return s-a>0?(n.css({top:a+o.$el.outerHeight()/2,left:u,width:o.$el.position().left-u,height:s-a}),$('<div class="top-bracket">').appendTo(n),$('<div class="top-line">').appendTo(n),$('<div class="bottom-bracket">').appendTo(n),$('<div class="bottom-line">').appendTo(n)):(n.css({top:o.$el.position().top,left:u,width:o.$el.position().left-u,height:o.$el.outerHeight()}),$('<div class="top-line full-width">').appendTo(n),$('<div class="bottom-line full-width">').appendTo(n)),n},e.findView=function(e,t){return _.find(t,function(t){return t.model===e?!0:!1})},e}()}),window.require.register("utility/brackets/match-pruner",function(e,t,n){var r;n.exports=r=function(){function e(){}return e.prune=function(e,t){var n,r,i,s,o,u,a,f,l,c;o=[];for(u=0,f=e.length;u<f;u++){n=e[u],r=!0,c=n.teams();for(a=0,l=c.length;a<l;a++)s=c[a],parseInt(s.get("seed"))>t&&(r=!1);r?o.push(n):(i=n.get("parent"),i.set("children",_.filter(i.get("children"),function(e){return e!==n})))}return o},e}()}),window.require.register("utility/brackets/random-string",function(e,t,n){var r;n.exports=r=function(){function e(){}return e.get=function(e){return e==null&&(e="xxxxxxxx"),e=e.replace(/[xy]/g,function(e){var t,n;return t=Math.random()*16|0,n=e==="x"?t:t&3|8,n.toString(16)}),e},e}()}),window.require.register("utility/brackets/root-finder",function(e,t,n){var r;n.exports=r=function(){function e(){}return e.find=function(e){var t,n,r;for(n=0,r=e.length;n<r;n++){t=e[n];if(t.get("parent")==null)return t}},e.findLoserRoot=function(e){var t,n,r;for(n=0,r=e.length;n<r;n++){t=e[n];if(t.get("parent")==null)return t.get("children")[1]}},e.findWinnerRoot=function(e){var t,n,r;for(n=0,r=e.length;n<r;n++){t=e[n];if(t.get("parent")==null)return t.get("children")[0]}},e}.call(this)}),window.require.register("utility/brackets/rounds-from-match-list",function(e,t,n){var r;n.exports=r=function(){function e(){}return e.convert=function(t){var n;return n=[],t!=null&&e.rec(t,0,n),n.reverse()},e.rec=function(t,n,r){var i,s,o,u;r[n]==null&&(r[n]=[]),r[n].push(t),u=[];for(i=s=0,o=t.get("children").length;0<=o?s<o:s>o;i=0<=o?++s:--s)t.get("children")[i]!=null&&u.push(e.rec(t.get("children")[i],n+1,r));return u},e}.call(this)}),window.require.register("utility/brackets/tree-view-formatter",function(e,t,n){var r,i,s;r=t("utility/brackets/root-finder"),i=t("utility/brackets/rounds-from-match-list"),n.exports=s=function(){function e(){}return e.format=function(e,t,n){var r,s,o,u,a,f,l,c,h;return s=e.get("children")[1],l=e.get("children")[0],e.get("children")[1].get("hasLoserSlot")?(o=i.convert(s),c=i.convert(l),r=this.singleTree(o,t,n),h=r.x/(c.length-1),f=this.singleTree(c,h,n),this.addOffset(s,0,f.y+n+20),a=_.clone(e.get("transform2d")),a.x=f.x+h,a.y=this.between(l,s),e.set("transform2d",a)):(u=i.convert(e),this.singleTree(u,t+40,n))},e.singleTree=function(e,t,n){var r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E;u=0,o={x:0,y:0};for(i=f=0,m=e.length;0<=m?f<m:f>m;i=0<=m?++f:--f)e[i].length>e[u].length&&(u=i);for(i=l=u,g=e.length;u<=g?l<g:l>g;i=u<=g?++l:--l)for(s=c=0,y=e[i].length;0<=y?c<y:c>y;s=0<=y?++c:--c){a={x:i*t,y:0};if(i===u)a.y=s*n;else if(((b=e[i][s].get("children"))!=null?b.length:void 0)>0){w=e[i][s].get("children");for(h=0,p=w.length;h<p;h++)r=w[h],r!=null&&(a.y+=r.get("transform2d").y);a.y/=e[i][s].get("children").length}e[i][s].set("transform2d",a),o.x=Math.max(a.x,o.x),o.y=Math.max(a.y,o.y)}for(i=d=u;u<=0?d<0:d>0;i=u<=0?++d:--d)for(s=v=0,E=e[i-1].length;0<=E?v<E:v>E;s=0<=E?++v:--v)a={x:(i-1)*t,y:e[i-1][s].get("parent").get("transform2d").y},e[i-1][s].set("transform2d",a);return o},e.between=function(e,t){var n;return n=(e.get("transform2d").y+t.get("transform2d").y)/2},e.addOffset=function(t,n,r){var i,s,o,u,a,f;n==null&&(n=0),r==null&&(r=0),s=_.clone(t.get("transform2d")),s.x+=n,s.y+=r,t.set("transform2d",s),a=t.get("children"),f=[];for(o=0,u=a.length;o<u;o++)i=a[o],f.push(e.addOffset(i,n,r));return f},e}.call(this)}),window.require.register("utility/fuse-trees",function(e,t,n){var r,i,s;i=t("models/brackets/match"),s=t("models/brackets/match-team"),n.exports=r=function(){function e(){}return e.fuse=function(e,t){var n;return n=new i({children:[e,t]}),n.teams([new s({seed:1}),new s({seed:2})]),e.set("parent",n),t.set("parent",n),n},e}()}),window.require.register("utility/huffman-code",function(e,t,n){var r;n.exports=r=function(){function e(){}return e.losersInRound=function(t,n){var r;return r=e.createLookup(t),t%2===0&&r.children.reverse(),n>32&&t>=5&&_.map(r.children,function(e){return e.children.reverse()}),e.flattenTree(r,t)},e.createLookup=function(e,t,n){return t==null&&(t=""),n==null&&(n=""),{val:t+n,children:e-1===0?[]:[this.createLookup(e-1,t+n,0),this.createLookup(e-1,t+n,1)]}},e.flattenTree=function(e,t,n,r){var i,s,o,u;n==null&&(n=[]),r==null&&(r=0);if(r===t||e.children.length<1)n.push(e.val);else{u=e.children;for(s=0,o=u.length;s<o;s++)i=u[s],this.flattenTree(i,t,n,r+1)}return n},e.followString=function(t,n){var r;return t.length>0?(r=parseInt(t.charAt(0)),e.followString(t.slice(1,t.length),n.get("children")[r])):n.teams()[1]},e}.call(this)}),window.require.register("utility/int-to-alphabet",function(e,t,n){var r;n.exports=r=function(){function e(){}return e.alphabet="ABCDEFGHIJKLMNOPQRSTUVWXYZ",e.get=function(t){var n,r,i,s;t=parseInt(t),r=Math.ceil(t/e.alphabet.length),i="";for(n=s=0;0<=r?s<r:s>r;n=0<=r?++s:--s)i+=e.alphabet.charAt(t-e.alphabet.length*n-1);return i},e}.call(this)}),window.require.register("utility/match-from-parent",function(e,t,n){var r,i;r=t("models/brackets/match"),n.exports=i=function(){function e(){}return e.make=function(e,t){var n;return t==null&&(t={}),n=new r(t),n.set("parent",e),e.get("children").push(n),n},e.insert=function(e,t){var n,i,s,o,u;t==null&&(t={}),i=new r(t),i.set("parent",e),i.set("children",e.get("children")),u=i.get("children");for(s=0,o=u.length;s<o;s++)n=u[s],n.set("parent",i);return e.set("children",[i]),i},e}.call(this)}),window.require.register("utility/mcclane",function(e,t,n){var r;n.exports=r=function(){function e(){}return e.model=null,e.save=function(){if(e.model!=null)return e.model.save(null,{xhrFields:{withCredentials:!0}});throw new Error("Bracket is not bound to Mcclane")},e}.call(this)}),window.require.register("utility/menu-resizer",function(e,t,n){var r;n.exports=r=function(){function e(){}return e.auto=function(e){return e.outerHeight()>$(window).outerHeight()-100?(e.height($(window).outerHeight()-100),e.css({overflow:"scroll"})):e.css({overflow:"visible",height:"auto"})},e}()}),window.require.register("utility/viper",function(e,t,n){var r;n.exports=r=function(){function e(){}return e.defSync=function(e){var t=this;if(e!=null)return{success:function(t){return e()},error:function(t,n){return e()}}},e.saveEvent=function(t,n){return n==null&&(n=null),t.save(null,e.defSync(n))},e.saveEvents=function(t){var n,r,i,s;s=[];for(r=0,i=t.length;r<i;r++)n=t[r],n!=null&&s.push(e.saveEvent(n));return s},e.saveMatchups=function(t){var n,r,i,s;s=[];for(r=0,i=t.length;r<i;r++)n=t[r],n!=null&&s.push(e.saveMatchup(n));return s},e.saveMatchup=function(t,n){return n==null&&(n=null),t.get("matchup").id==null?t.save(null,{success:function(e){return t.get("matchup").save(null,{success:function(e){if(n!=null)return n()}})},error:function(e,t){if(n!=null)return n()}}):t.get("matchup").save(null,e.defSync(n))},e.saveGame=function(t,n,r){return r==null&&(r=null),n.id==null?t.save(null,{success:function(t){return n.save(null,e.defSync(r))},error:function(e,t){if(r!=null)return r()}}):n.save(null,e.defSync(r))},e.saveMatch=function(t,n){return n==null&&(n=null),t.event().save(null,{success:function(r){return t.matchup().save(null,e.defSync(n))},error:function(e,t){if(n!=null)return n()}})},e.saveMatches=function(t){var n,r,i,s;s=[];for(r=0,i=t.length;r<i;r++)n=t[r],n!=null&&s.push(e.saveMatch(n));return s},e.saveTeam=function(t,n){return n==null&&(n=null),t.save(null,e.defSync(n))},e.resetEvent=function(t,n){var r;return n.url=t.url(),n.type="DELETE",n.success!=null&&(r=n.success,n.success=function(){return delete t.id,delete t.get("matchup").id,e.saveMatchup(t,r)}),$.ajax(n)},e}.call(this)}),window.require.register("views/admin-toolbar-view",function(e,t,n){var r,i,s,o=function(e,t){return function(){return e.apply(t,arguments)}},u={}.hasOwnProperty,a=function(e,t){function r(){this.constructor=e}for(var n in t)u.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};i=t("views/base/view"),s=t("views/templates/admin-toolbar"),n.exports=r=function(e){function t(){return this.openMenu=o(this.openMenu,this),t.__super__.constructor.apply(this,arguments)}return a(t,e),t.prototype.autoRender=!0,t.prototype.container="#toolbar-container",t.prototype.id="admin-toolbar",t.prototype.template=s,t.prototype.events={"click .btn":function(e){return this.openMenu($(e.currentTarget).attr("id"))}},t.prototype.initialize=function(e){return t.__super__.initialize.call(this,e),this.$curMenu=null,this.curSlug=""},t.prototype.render=function(){var e,n;return t.__super__.render.apply(this,arguments),n=function(){var t,n,r,i;r=this.collection.models,i=[];for(t=0,n=r.length;t<n;t++)e=r[t],e.has("label")&&i.push({label:e.get("label"),slug:e.get("slug")});return i}.call(this),this.$el.html(this.template({btns:n}))},t.prototype.openMenu=function(e){var t,n,r,i,s,o;if(e!==this.curSlug){i=this.collection.models,o=[];for(n=0,r=i.length;n<r;n++){t=i[n];if(t.get("slug")===e){(s=this.$curMenu)!=null&&s.fadeOut(),this.$curMenu=t.get("menu").$el,this.curSlug=e,t.get("menu").$el.fadeIn(),this.$(".btn").removeClass("active"),t.has("label")&&this.$("#"+t.get("slug")).addClass("active");break}o.push(void 0)}return o}},t}(i)}),window.require.register("views/admin-workspace-view",function(e,t,n){var r,i,s,o,u,a,f,l,c,h,p,d,v,m={}.hasOwnProperty,g=function(e,t){function r(){this.constructor=e}for(var n in t)m.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};p=t("views/base/view"),v=t("views/templates/admin-workspace"),r=t("views/admin-toolbar-view"),d=t("views/tool-menus/wizard-menu-view"),l=t("models/single-elim-wizard"),h=t("views/tool-menus/team-menu-view"),c=t("models/team-auto-seeder"),u=t("views/tool-menus/match-menu-view"),a=t("models/match-mutator"),o=t("views/tool-menus/group-menu-view"),s=t("models/group-generator"),f=t("views/tool-menus/publish-menu-view"),n.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return g(t,e),t.prototype.autoRender=!0,t.prototype.className="workspace",t.prototype.container="#page-container",t.prototype.template=v,t.prototype.initialize=function(e){var n=this;return t.__super__.initialize.call(this,e),this.collection.add({label:"Wizard",slug:"wizard-menu",logic:new l,menu:new d({bracket:this.model})}),this.collection.add({label:"Teams",slug:"teams-menu",logic:new c({bracket:this.model}),menu:new h({bracket:this.model})}),this.collection.add({slug:"match-menu",logic:new a,menu:new u({bracket:this.model})}),this.collection.add({slug:"publish-menu",menu:new f({bracket:this.model})}),this.toolbar=new r({collection:this.collection}),_.each(this.collection.models,function(e){return e.get("menu").toolbar=n.toolbar})},t.prototype.render=function(){var e,n,r;t.__super__.render.apply(this,arguments),this.toolbar.$el.appendTo(this.$("#toolbar-container")),r=this.collection.models;for(n in r)e=r[n],this.collection.models[n].get("menu").$el.appendTo(this.$("#menu-container")).hide();return this.toolbar.openMenu(this.collection.at(0).get("slug")),this},t}(p)}),window.require.register("views/base/collection-view",function(e,t,n){var r,i,s,o={}.hasOwnProperty,u=function(e,t){function r(){this.constructor=e}for(var n in t)o.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};r=t("chaplin"),s=t("views/base/view"),n.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return u(t,e),t.prototype.getTemplateFunction=s.prototype.getTemplateFunction,t}(r.CollectionView)}),window.require.register("views/base/view",function(e,t,n){var r,i,s={}.hasOwnProperty,o=function(e,t){function r(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};r=t("chaplin"),t("lib/view-helper"),n.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return o(t,e),t.prototype.getTemplateFunction=function(){return this.template},t}(r.View)}),window.require.register("views/bracket-editor-view",function(e,t,n){var r,i,s,o,u,a,f,l=function(e,t){return function(){return e.apply(t,arguments)}},c={}.hasOwnProperty,h=function(e,t){function r(){this.constructor=e}for(var n in t)c.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};a=t("views/base/view"),o=t("models/base/collection"),s=t("views/brackets/bracket-view"),i=t("utility/brackets/bracket-urls"),f=t("mediator"),u=t("utility/mcclane"),n.exports=r=function(e){function t(){return this.saveTitle=l(this.saveTitle,this),this.editTitle=l(this.editTitle,this),this.deselect=l(this.deselect,this),this.clickMatch=l(this.clickMatch,this),this.saveBracket=l(this.saveBracket,this),t.__super__.constructor.apply(this,arguments)}return h(t,e),t.prototype.initialize=function(e){return t.__super__.initialize.call(this,e),this.model.url=function(){return i.apiBase+"/brackets/v6/api/"},this.delegate("click",".match",function(e){return this.clickMatch(e)}),this.delegate("click",".hotzone",function(){return this.deselect()}),this.delegate("click",".bracket-title",function(e){return this.editTitle(e)}),this.delegate("blur",".bracket-title-input",function(e){return this.saveTitle(e)}),this.selected=[]},t.prototype.render=function(){return t.__super__.render.apply(this,arguments),$('<div class="hotzone">').appendTo(this.$el).width(this.$el.width()).height(this.$el.height()),$('<input type="text" class="bracket-title-input">').appendTo(this.$(".label-layer span.bracket-title")),this},t.prototype.saveBracket=function(){return this.model.save(null,{xhrFields:{withCredentials:!0}})},t.prototype.clickMatch=function(e){e.shiftKey!==!0&&this.deselect();if(!$(e.currentTarget).hasClass("activeSelect"))return this.selected.push($(e.currentTarget).data("match")),$(e.currentTarget).addClass("activeSelect"),f.publish("change:selected",this.selected)},t.prototype.deselect=function(){return $(".match.activeSelect").removeClass("activeSelect"),this.selected=[]},t.prototype.editTitle=function(e){return $(e.currentTarget).addClass("editing"),$(e.currentTarget).find("input").focus().val(this.model.get("title"))},t.prototype.saveTitle=function(e){var t;return $(e.currentTarget).parent("span").removeClass("editing"),t=String($(e.currentTarget).val().trim()),this.model.set("title",t),this.model.set("slug",t.toLowerCase().replace(/\ /g,"-").replace(/[^\w|-]/g,"")),this.$(".bracket-title h1").text(this.model.get("title")),u.save()},t}(s)}),window.require.register("views/brackets/bracket-view",function(e,t,n){var r,i,s,o,u,a,f,l,c,h,p={}.hasOwnProperty,d=function(e,t){function r(){this.constructor=e}for(var n in t)p.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};c=t("views/base/view"),h=t("views/templates/brackets/bracket"),u=t("views/brackets/match-view"),o=t("views/brackets/group-view"),f=t("utility/brackets/root-finder"),l=t("utility/brackets/rounds-from-match-list"),s=t("utility/brackets/tree-view-formatter"),a=t("utility/brackets/bracket-padding"),i=t("utility/brackets/match-connector"),n.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return d(t,e),t.prototype.template=h,t.prototype.container="#bracket-container",t.prototype.id="bracket-layer",t.prototype.autoRender=!0,t.prototype.initialize=function(e,n){var r=this;return n==null&&(n={top:200,right:400,bottom:200,left:100}),t.__super__.initialize.call(this,e),this.listenTo(this.model.get("matches"),"reset",function(){return r.renderCount=0,r.render()}),this.listenTo(this.model.get("groups"),"add",function(){return r.render()}),a.match.width=200,a.match.height=74,this.padding=n,this.renderCount=0},t.prototype.render=function(){var e,n,r,l,c,h,p,d,v,m,g,y,b,w,E,S,x;t.__super__.render.apply(this,arguments),h=this.model.get("matches"),n=this.model.get("groups"),d=f.find(h.models),c=[];if(d==null)return this;this.renderCount<1&&(s.format(d,a.match.width,a.match.height),a.setBracket(this.model,this.$el),a.setPadding(this.padding)),E=h.models;for(v=0,y=E.length;v<y;v++)l=E[v],p=new u({model:l}),p.$el.data("match",p.model),p.$el.appendTo(this.$el.find(".match-layer")),c.push(p);S=n.models;for(m=0,b=S.length;m<b;m++)e=S[m],r=new o({model:e}),r.$el.data("group",r.model),r.$el.appendTo(this.$el.find(".match-layer"));a.updateBounds(),this.$("span.bracket-title h1").text(this.model.get("title")),this.$("span.bracket-title").css({position:"absolute",top:a.padding.top-70,left:a.padding.left}),x=h.models;for(g=0,w=x.length;g<w;g++)l=x[g],l.get("children").length>0&&i.connect(l,c).appendTo(this.$el.find(".line-layer"));return++this.renderCount},t,t}(c)}),window.require.register("views/brackets/group-view",function(e,t,n){var r,i,s,o=function(e,t){return function(){return e.apply(t,arguments)}},u={}.hasOwnProperty,a=function(e,t){function r(){this.constructor=e}for(var n in t)u.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};i=t("views/base/view"),s=t("views/templates/brackets/group-stage"),n.exports=r=function(e){function t(){return this.updatePosition=o(this.updatePosition,this),t.__super__.constructor.apply(this,arguments)}return a(t,e),t.prototype.template=s,t.prototype.autoRender=!0,t.prototype.className="group",t.prototype.initialize=function(){return t.__super__.initialize.apply(this,arguments),this.model.on("change:transform2d",this.updatePosition),this.listenTo(this.model.get("teams"),"add remove",this.render),this.listenTo(this.model.get("matches"),"add remove",this.render)},t.prototype.updatePosition=function(){var e;return e=this.model.get("transform2d"),this.$el.css({top:e.y+e.paddingY,left:e.x+e.paddingX})},t.prototype.render=function(){var e,n,r,i,s;t.__super__.render.apply(this,arguments),e={},e.title=this.model.get("title"),e.matches=function(){var e,t;e=this.model.get("matches").models,t=[];for(n in e)r=e[n],t.push(parseInt(n)+1);return t}.call(this),e.teams=this.model.get("teams").map(function(e){return e.get("name")}),this.$el.html(this.template(e)),i=this.model.get("matches"),s=i.models;for(n in s)r=s[n],this.$(".match").eq(n).data("match",r);return this},t}(i)}),window.require.register("views/brackets/match-view",function(e,t,n){var r,i,s,o=function(e,t){return function(){return e.apply(t,arguments)}},u={}.hasOwnProperty,a=function(e,t){function r(){this.constructor=e}for(var n in t)u.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};i=t("views/base/view"),s=t("views/templates/brackets/match"),n.exports=r=function(e){function t(){return this.updatePosition=o(this.updatePosition,this),this.changeTeams=o(this.changeTeams,this),this.formatTime=o(this.formatTime,this),t.__super__.constructor.apply(this,arguments)}return a(t,e),t.prototype.template=s,t.prototype.autoRender=!0,t.prototype.className="match",t.prototype.initialize=function(e){var n=this;return t.__super__.initialize.call(this,e),this.model.on("change:transform2d",this.updatePosition),this.listenTo(this.model.matchup(),"change:teams",function(){return n.changeTeams()}),this.changeTeams()},t.prototype.render=function(){var e,n,r,i;return t.__super__.render.apply(this,arguments),i=function(){var t,n,i,s;i=this.model.teams(),s=[];for(t=0,n=i.length;t<n;t++)e=i[t],r={},r.name=e!=null&&e.get("name")!=="TBD"?e.get("name"):"",r.points=e!=null&&e.get("name")!=="TBD"?e.get("points"):"",s.push(r);return s}.call(this),n=this.formatTime(),this.$el.html(this.template({teams:i,time:n})),this.updatePosition(),this},t.prototype.formatTime=function(){var e,t;return e=moment(this.model.event().get("starts_at"),"MM/DD/YYYY hh:mm aZ"),t=e.format("MM.DD hh:mmA"),moment().valueOf()>e.endOf("day").valueOf()?"":t},t.prototype.changeTeams=function(){var e,t,n,r,i=this;this.stopListening(),this.listenTo(this.model.event(),"change:starts_at",function(){return i.render()}),this.listenTo(this.model.get("event").get("matchup"),"change:teams",function(){return i.changeTeams()}),r=this.model.teams();for(t=0,n=r.length;t<n;t++)e=r[t],e!=null&&this.listenTo(e,"change",function(){return i.render()});return this.render()},t.prototype.updatePosition=function(){var e;return e=this.model.get("transform2d"),this.$el.css({top:e.y+e.paddingY,left:e.x+e.paddingX})},t}(i)}),window.require.register("views/game-sub-view",function(e,t,n){var r,i,s,o=function(e,t){return function(){return e.apply(t,arguments)}},u={}.hasOwnProperty,a=function(e,t){function r(){this.constructor=e}for(var n in t)u.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};i=t("views/base/view"),s=t("views/templates/game-sub"),n.exports=r=function(e){function t(){return this.setMatchup=o(this.setMatchup,this),t.__super__.constructor.apply(this,arguments)}return a(t,e),t.prototype.template=s,t.prototype.tagName="li",t.prototype.container="#game-container",t.prototype["class"]="game-sub-view",t.prototype.initialize=function(e){return t.__super__.initialize.call(this,e)},t.prototype.setMatchup=function(e){return this.matchup=e,this},t.prototype.render=function(){var e,n;return t.__super__.render.apply(this,arguments),e={},e.gameNumber=this.model.get("number"),e.teams=function(){var e,t,r,i;r=this.matchup.get("teams"),i=[];for(e=0,t=r.length;e<t;e++)n=r[e],i.push({id:n.id,name:n.get("name")});return i}.call(this),this.$el.html(this.template(e)),this.$el.addClass(this.model.get("status").replace(/\ /g,"-")),this},t}(i)}),window.require.register("views/header-view",function(e,t,n){var r,i,s,o,u,a={}.hasOwnProperty,f=function(e,t){function r(){this.constructor=e}for(var n in t)a.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};s=t("views/base/view"),u=t("views/templates/header"),o=t("mediator"),i=t("utility/mcclane"),n.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return f(t,e),t.prototype.autoRender=!0,t.prototype.className="navbar navbar-fixed-top",t.prototype.container="#header-container",t.prototype.id="header",t.prototype.template=u,t.prototype.events={"click .header-link":function(e){return this.followLink(e)},"click .save-link":function(e){return this.saveBracket(e)},"click .publish-link":function(e){return this.showPubMenu(e)}},t.prototype.showPubMenu=function(e){return o.publish("publish:clicked"),!1},t.prototype.saveBracket=function(e){return i.save(),!1},t.prototype.followLink=function(e){return window.location=window.location.protocol+"//"+window.location.host+$(e.currentTarget).attr("href"),!1},t}(s)}),window.require.register("views/home-page-view",function(e,t,n){var r,i,s,o={}.hasOwnProperty,u=function(e,t){function r(){this.constructor=e}for(var n in t)o.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};s=t("views/templates/home"),i=t("views/base/view"),n.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return u(t,e),t.prototype.autoRender=!0,t.prototype.className="home-page",t.prototype.container="#page-container",t.prototype.template=s,t}(i)}),window.require.register("views/layout",function(e,t,n){var r,i,s={}.hasOwnProperty,o=function(e,t){function r(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};r=t("chaplin"),n.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return o(t,e),t}(r.Layout)}),window.require.register("views/open-menu-view",function(e,t,n){var r,i,s,o,u,a=function(e,t){return function(){return e.apply(t,arguments)}},f={}.hasOwnProperty,l=function(e,t){function r(){this.constructor=e}for(var n in t)f.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};o=t("views/base/view"),u=t("views/templates/open-menu"),i=t("models/base/collection"),r=t("utility/brackets/bracket-urls"),n.exports=s=function(e){function t(){return this.render=a(this.render,this),t.__super__.constructor.apply(this,arguments)}return l(t,e),t.prototype.template=u,t.prototype.container="#page-container",t.prototype.className="open-bracket-menu",t.prototype.autoRender=!0,t.prototype.initialize=function(e){var n=this;return t.__super__.initialize.call(this,e),this.brackets=[],$.ajax({url:r.apiBase+"/brackets/v6/api/list/",success:function(e){return n.brackets=e,n.render()}})},t.prototype.render=function(){var e,n,r,i,s;t.__super__.render.apply(this,arguments),n={},n.brackets=this.brackets,s=n.brackets;for(r=0,i=s.length;r<i;r++)e=s[r],e!=null&&(e.date=moment(e.date,"YYYY-MM-DDTHH:mm:ssZ").format("MM.DD.YYYY hh:mmA"));return this.$el.html(this.template(n)),this},t}(o)}),window.require.register("views/templates/admin-toolbar",function(e,t,n){n.exports=Handlebars.template(function(e,t,n,r,i){function l(e,t){var n="",r;return n+='\n	<button class="btn" id="',r=e.slug,r=typeof r===u?r():r,n+=a(r)+'" >\n		',r=e.label,r=typeof r===u?r():r,n+=a(r)+"\n	</button>\n	",n}n=n||e.helpers;var s="",o,u="function",a=this.escapeExpression,f=this;s+='<div class="btn-group btn-group">\n	',o=t.btns,o=n.each.call(t,o,{hash:{},inverse:f.noop,fn:f.program(1,l,i)});if(o||o===0)s+=o;return s+="\n</div>",s})}),window.require.register("views/templates/admin-workspace",function(e,t,n){n.exports=Handlebars.template(function(e,t,n,r,i){return n=n||e.helpers,'<div id="bracket-container">\n</div>\n<div id="toolbar-container"></div>\n<div id="menu-container"></div>\n'})}),window.require.register("views/templates/brackets/bracket",function(e,t,n){n.exports=Handlebars.template(function(e,t,n,r,i){return n=n||e.helpers,'<div class="line-layer">\n</div>\n<div class="match-layer">\n</div>\n<div class="label-layer">\n<span class="bracket-title"><h1></h1></span>\n</div>'})}),window.require.register("views/templates/brackets/group-stage",function(e,t,n){n.exports=Handlebars.template(function(e,t,n,r,i){function c(e,t){var n="";return n+="\n		<li>",e=typeof e===a?e():e,n+=f(e)+"</li>\n	",n}function h(e,t){var n="";return n+='\n		<li><button class="btn btn-mini match">',e=typeof e===a?e():e,n+=f(e)+"</button></li>\n	",n}n=n||e.helpers;var s="",o,u,a="function",f=this.escapeExpression,l=this;s+="<h3>",u=n.title,u?o=u.call(t,{hash:{}}):(o=t.title,o=typeof o===a?o():o),s+=f(o)+'</h3>\n<ul class="group-team-list">\n	',o=t.teams,o=n.each.call(t,o,{hash:{},inverse:l.noop,fn:l.program(1,c,i)});if(o||o===0)s+=o;s+='\n</ul>\n<ul class="match-list">\n	',o=t.matches,o=n.each.call(t,o,{hash:{},inverse:l.noop,fn:l.program(3,h,i)});if(o||o===0)s+=o;return s+="\n</ul>",s})}),window.require.register("views/templates/brackets/match",function(e,t,n){n.exports=Handlebars.template(function(e,t,n,r,i){function l(e,t){var n="",r;return n+='\n		<span class="team-label">',r=e.name,r=typeof r===u?r():r,n+=a(r)+"</span>\n	",n}function c(e,t){var n="",r;return n+='\n		<span class="team-score">',r=e.points,r=typeof r===u?r():r,n+=a(r)+"</span>\n	",n}function h(e,t){var r="",i,s;return r+='\n	<div class="time-rider"><i class="icon-time"></i> ',s=n.time,s?i=s.call(e,{hash:{}}):(i=e.time,i=typeof i===u?i():i),r+=a(i)+"</div>\n",r}n=n||e.helpers;var s="",o,u="function",a=this.escapeExpression,f=this;s+='<div class="team-container">\n	',o=t.teams,o=n.each.call(t,o,{hash:{},inverse:f.noop,fn:f.program(1,l,i)});if(o||o===0)s+=o;s+='\n</div>\n<div class="score-container">\n	',o=t.teams,o=n.each.call(t,o,{hash:{},inverse:f.noop,fn:f.program(3,c,i)});if(o||o===0)s+=o;s+="\n</div>\n\n",o=t.time,o=n["if"].call(t,o,{hash:{},inverse:f.noop,fn:f.program(5,h,i)});if(o||o===0)s+=o;return s})}),window.require.register("views/templates/game-sub",function(e,t,n){n.exports=Handlebars.template(function(e,t,n,r,i){function c(e,t){var n="",r;return n+='\n		<button class="btn btn-small btn-primary btn-block team-btn">',r=e.name,r=typeof r===a?r():r,n+=f(r)+"</button>\n	",n}function h(e,t){var n="",r;return n+='\n		<button class="btn btn-small btn-block" disabled>',r=e.name,r=typeof r===a?r():r,n+=f(r)+"</button>\n	",n}n=n||e.helpers;var s="",o,u,a="function",f=this.escapeExpression,l=this;s+='<div class="ready">\n	<div class="game-header">Game #',u=n.gameNumber,u?o=u.call(t,{hash:{}}):(o=t.gameNumber,o=typeof o===a?o():o),s+=f(o)+'</div>\n</div>\n<div class="underway">\n	<span>Winner:</span>\n	',o=t.teams,o=n.each.call(t,o,{hash:{},inverse:l.noop,fn:l.program(1,c,i)});if(o||o===0)s+=o;s+='\n</div>\n<div class="finished">\n	',o=t.teams,o=n.each.call(t,o,{hash:{},inverse:l.noop,fn:l.program(3,h,i)});if(o||o===0)s+=o;return s+='\n</div>\n<button class="btn btn-small btn-block btn-success start-game">Start Game</button>',s})}),window.require.register("views/templates/group-menu",function(e,t,n){n.exports=Handlebars.template(function(e,t,n,r,i){function l(e,t){var n="",r;return n+='\n		<li class="clearfix">\n			<strong>',r=e.title,r=typeof r===u?r():r,n+=a(r)+'</strong>\n			<div class="group-input">\n				<label>Players</label>\n				<input type="text" value="',r=e.players,r=typeof r===u?r():r,n+=a(r)+'" class="span1 group-players-input" >\n			</div>\n			<div class="group-input">\n				<label>Matches</label>\n				<input type="text" value="',r=e.matches,r=typeof r===u?r():r,n+=a(r)+'" class="span1 group-matches-input">\n			</div>\n		</li>\n	',n}n=n||e.helpers;var s="",o,u="function",a=this.escapeExpression,f=this;s+="<form>\n	<fieldset>\n	<legend>Edit Groups</legend>\n	<ul>\n	",o=t.groups,o=n.each.call(t,o,{hash:{},inverse:f.noop,fn:f.program(1,l,i)});if(o||o===0)s+=o;return s+='\n	</ul>\n	<hr>\n	<label>Add Group</label>\n	<button class="btn btn-success">+</button>\n	</fieldset>\n</form>',s})}),window.require.register("views/templates/header",function(e,t,n){n.exports=Handlebars.template(function(e,t,n,r,i){return n=n||e.helpers,'<div class="navbar-inner">\n<div class="brand">\n</div>\n<ul class="nav">\n	<li>\n		<a class="header-link" href="/brackets/v6/admin/"><i class="icon-file"></i> New Bracket</a>\n	</li>\n	<li>\n		<a class="save-link" href="#"><i class="icon-check"></i> Save Bracket</a>\n	</li>\n	<li>\n		<a class="header-link" href="/brackets/v6/admin/load"><i class="icon-folder-open"></i> Load Bracket</a>\n	</li>\n	<li>\n		<a class="publish-link" href="#"><i class="icon-list-alt"></i> Publish</a>\n	</li>\n</ul>\n</div>'})}),window.require.register("views/templates/home",function(e,t,n){n.exports=Handlebars.template(function(e,t,n,r,i){return n=n||e.helpers,'<a href="http://brunch.io/">\n  <img src="http://brunch.io/images/brunch.png" alt="Brunch" />\n</a>\n'})}),window.require.register("views/templates/match-menu",function(e,t,n){n.exports=Handlebars.template(function(e,t,n,r,i){n=n||e.helpers;var s="",o,u,a="function",f=this.escapeExpression;return s+='<form>\n	<fieldset>\n	<legend>Edit Match</legend>\n\n	<div id="teams-area">\n		<label>Title</label>\n		<input type="text" id="match-title" value="',u=n.title,u?o=u.call(t,{hash:{}}):(o=t.title,o=typeof o===a?o():o),s+=f(o)+'">\n		<label>Teams</label>\n		<select id="team1" class="team-list" slot="0" >\n		</select>\n		<select id="team2" class="team-list" slot="1" >\n		</select>\n	</div>\n\n	<div id="games-area">\n		<label>Best of</label>\n		<input type="text" class="span1 best-of-input" value=',u=n.bestOf,u?o=u.call(t,{hash:{}}):(o=t.bestOf,o=typeof o===a?o():o),s+=f(o)+'>\n		<ul id="game-container">\n		</ul>\n		',s+="\n		",s+='\n	</div>\n\n	<div id="event-area">\n		<label>Start time</label>\n		<input type="text" id="start-time" value="',u=n.startsAt,u?o=u.call(t,{hash:{}}):(o=t.startsAt,o=typeof o===a?o():o),s+=f(o)+'">\n		<label>Stream</label>\n		<select id="stream-select" class="stream-list">\n		</select>\n		',s+='\n\n	<hr>\n	<a href="#">Click here to edit in IPL-Koala</a>\n	</fieldset>\n</form>',s})}),window.require.register("views/templates/open-menu",function(e,t,n){n.exports=Handlebars.template(function(e,t,n,r,i){function l(e,t){var n="",r;return n+='\n		<li><a href="edit/',r=e.slug,r=typeof r===u?r():r,n+=a(r)+'">',r=e.title,r=typeof r===u?r():r,n+=a(r)+'</a> - <span class="date-line">',r=e.date,r=typeof r===u?r():r,n+=a(r)+"</span></li>\n	",n}n=n||e.helpers;var s="",o,u="function",a=this.escapeExpression,f=this;s+="<h1>\n	Load a bracket\n</h1>\n\n<ul>\n	",o=t.brackets,o=n.each.call(t,o,{hash:{},inverse:f.noop,fn:f.program(1,l,i)});if(o||o===0)s+=o;return s+="\n</ul>",s})}),window.require.register("views/templates/publish-menu",function(e,t,n){n.exports=Handlebars.template(function(e,t,n,r,i){n=n||e.helpers;var s="",o,u,a="function",f=this.escapeExpression;return s+='<form>\n	<fieldset>\n	<legend>Publish Bracket</legend>\n	<label>Direct Link</label>\n	<input type="text" value="',u=n.directLink,u?o=u.call(t,{hash:{}}):(o=t.directLink,o=typeof o===a?o():o),s+=f(o)+'">\n	<label>IFrame embed code</label>\n	<input type="text" value=\'<iframe src="',u=n.directLink,u?o=u.call(t,{hash:{}}):(o=t.directLink,o=typeof o===a?o():o),s+=f(o)+"\"></iframe>'>\n	</fieldset>\n</form>",s})}),window.require.register("views/templates/team-menu",function(e,t,n){n.exports=Handlebars.template(function(e,t,n,r,i){function l(e,t){var n="",r;return n+='\n	<li class="team-field">\n		<span class="team-label">',r=e.name,r=typeof r===u?r():r,n+=a(r)+'\n			<button class="btn btn-mini edit-team"><i class="icon-pencil"></i></button>\n		</span>\n		<span class="team-edit-label">\n			<input class="team-input" value="',r=e.name,r=typeof r===u?r():r,n+=a(r)+'" >\n			<button class="btn btn-mini edit-team"><i class="icon-ok"></i></button>\n		</span>\n	</li>\n',n}n=n||e.helpers;var s="",o,u="function",a=this.escapeExpression,f=this;s+='<form>\n	<legend>\nTeam seeding\n	</legend>\n	<fieldset>\n		<label class="checkbox">\n			<input id="enable-seeding" type="checkbox" checked > Auto-seeding\n		</label>\n		<ol id="team-sort-list">\n',o=t.teams,o=n.each.call(t,o,{hash:{},inverse:f.noop,fn:f.program(1,l,i)});if(o||o===0)s+=o;return s+="\n		</ol>\n	</fieldset>\n</form>",s})}),window.require.register("views/templates/wizard-menu",function(e,t,n){n.exports=Handlebars.template(function(e,t,n,r,i){return n=n||e.helpers,'<form>\n	<legend>Generate matches</legend>\n	<fieldset>\n		<label>Number of players</label>\n		<input type="text" value="4" id="num-players">\n		<label class="radio">\n  			<input type="radio" name="optionsRadios" id="optionsElimination1" value="single" checked>\n  		Single elimination\n		</label>\n		<label class="radio">\n		  <input type="radio" name="optionsRadios" id="optionsElimination2" value="double">\n		  Double elimination\n		</label>\n\n			<button type="submit" class="btn btn-primary">Generate</button>\n\n	</fieldset>\n</form>'})}),window.require.register("views/tool-menus/group-menu-view",function(e,t,n){var r,i,s,o,u,a={}.hasOwnProperty,f=function(e,t){function r(){this.constructor=e}for(var n in t)a.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};o=t("views/base/view"),u=t("views/templates/group-menu"),i=t("models/brackets/group-stage"),s=t("utility/brackets/bracket-padding"),n.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return f(t,e),t.prototype.autoRender=!0,t.prototype.template=u,t.prototype.container="#menu-container",t.prototype.id="group-menu",t.prototype.className="admin-menu clearfix",t.prototype.events={"click .btn":function(){return this.addGroup()},"change .group-players-input":function(e){var t;return t=$(e.currentTarget),this.changeTeams(t.parents("li").data("group"),parseInt(t.val())),!1},"change .group-matches-input":function(e){var t;return t=$(e.currentTarget),this.changeMatches(t.parents("li").data("group"),parseInt(t.val())),!1}},t.prototype.initialize=function(e){return t.__super__.initialize.call(this,e),this.bracket=e.bracket,this.collection=this.bracket.get("groups")},t.prototype.addGroup=function(){var e;return e=this.model.newGroup({title:"Group "+(this.collection.length+1),numTeams:4,numMatches:5}),this.collection.add(e),this.collection.length===1&&s.moveMatches(200,0),this.render(),!1},t.prototype.changeTeams=function(e,t){var n,r,i,s,o,u;s=e.get("teams"),i=s.length,n=Math.abs(t-i),u=[];for(r=o=0;0<=n?o<n:o>n;r=0<=n?++o:--o)t>i?u.push(s.add({name:"TEAM X"})):u.push(s.pop());return u},t.prototype.changeMatches=function(e,t){var n,r,i,s,o,u;s=e.get("matches"),i=s.length,n=Math.abs(t-i),u=[];for(r=o=0;0<=n?o<n:o>n;r=0<=n?++o:--o)t>i?u.push(s.add({bestOf:1})):u.push(s.pop());return u},t.prototype.render=function(){var e,n,r;return t.__super__.render.apply(this,arguments),n={},n.groups=function(){var t,n,r,i;r=this.collection.models,i=[];for(t=0,n=r.length;t<n;t++)e=r[t],i.push({title:e.get("title"),players:e.get("teams").length,matches:e.get("matches").length});return i}.call(this),this.$el.html(this.template(n)),r=this.collection,this.$("li").each(function(e){return $(this).data("group",r.at($(this).index()))}),this},t}(o)}),window.require.register("views/tool-menus/match-menu-view",function(e,t,n){var r,i,s,o,u,a,f,l,c,h,p,d=function(e,t){return function(){return e.apply(t,arguments)}},v={}.hasOwnProperty,m=function(e,t){function r(){this.constructor=e}for(var n in t)v.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};l=t("views/base/view"),p=t("views/templates/match-menu"),o=t("collections/brackets/matches"),h=t("mediator"),f=t("collections/brackets/streams"),r=t("views/game-sub-view"),s=t("models/brackets/match-team"),a=t("utility/menu-resizer"),c=t("utility/viper"),u=t("utility/mcclane"),n.exports=i=function(e){function t(){return this.saveTime=d(this.saveTime,this),this.saveStream=d(this.saveStream,this),this.selectionChanged=d(this.selectionChanged,this),this.fillSelect=d(this.fillSelect,this),this.endGame=d(this.endGame,this),this.startGame=d(this.startGame,this),this.resetMatchup=d(this.resetMatchup,this),this.renderGames=d(this.renderGames,this),this.render=d(this.render,this),t.__super__.constructor.apply(this,arguments)}return m(t,e),t.prototype.autoRender=!0,t.prototype.template=p,t.prototype.container="#menu-container",t.prototype.id="match-menu",t.prototype.className="admin-menu",t.prototype.events={"click button.start-game":function(){return this.startGame()},"click #reset-match-btn":function(){return this.resetMatchup()},"change .team-list":function(e){return this.saveTeam(e)},"change .best-of-input":function(e){return this.saveBestOf(e)},"change .stream-list":function(e){return this.saveStream(e)},"change #match-title":function(e){return this.saveTitle(e)},"change #group-select":function(e){return this.saveGroups(e)},"click .team-btn":function(e){return this.endGame(e)}},t.prototype.initialize=function(e){var n=this;return t.__super__.initialize.apply(this,arguments),h.subscribe("change:selected",function(e){return n.selectionChanged(e)}),this.streams=new f,this.streams.fetch({url:"http://esports.ign.com/content/v2/streams.json?callback=?",cached:!0}),this.bracket=e.bracket},t.prototype.render=function(){var e,n,r,i,s,o,u,f,l,c,h,p=this;t.__super__.render.apply(this,arguments);if(this.model==null)return this;n={},n.title=this.model.event().get("title"),n.bestOf=this.model.matchup().get("best_of"),n.startsAt=this.model.event().get("starts_at"),this.$el.html(this.template(n)),i=function(){var e,t,n,i;n=this.bracket.get("teams").models,i=[];for(e=0,t=n.length;e<t;e++)r=n[e],r!=null&&i.push(r.get("name"));return i}.call(this),i.unshift("TBD");for(u=0,f=i.length;u<f;u++)s=i[u],$("<option></option>").appendTo(this.$(".team-list")).text(s);o=(l=this.model)!=null?l.teams():void 0;if(o!=null)for(e in o)r=o[e],this.$("#team"+(parseInt(e)+1)+" option").each(function(e){if($(this).text()===r.get("name"))return $(this).prop("selected","selected")});return this.fillSelect(this.streams.models,".stream-list",(c=this.model)!=null?(h=c.get("event").get("stream"))!=null?h.name:void 0:void 0),_.first(this.model.selected).started()&&this.$(".team-list").prop("disabled","disabled"),this.$("#start-time").datetimepicker({timeFormat:"hh:mm ttz",hourGrid:6,minuteGrid:15,stepMinute:15,onSelect:function(e,t){return p.saveTime(e)}}),this.model.selected.length===1&&_.first(this.model.selected).noTBDs()&&this.renderGames(),a.auto(this.$el),this},t.prototype.renderGames=function(){var e,t,n=this;return e=0,t=!1,this.gameViews=this.model.games().map(function(i){var s;return s=(new r({model:i})).setMatchup(n.model.matchup()).render(),s.model.get("status")==="underway"&&(t=!0),(s.model.get("status")==="ready"&&e++>0||t)&&s.$(".start-game").hide(),s}),!1},t.prototype.resetMatchup=function(){return _.first(this.model.selected).matchup().reset(),this.render(),!1},t.prototype.startGame=function(){var e;return e=this.model.games().firstReady(),e.start(),c.saveGame(_.first(this.model.selected).event(),e),u.save(),this.render(),!1},t.prototype.endGame=function(e){var t,n,r,i=this;return n=this.model.matchup().pointFor(this.$(e.currentTarget).text()),t=this.model.games().next(n.winner),n.matchDecided&&(this.model.games().each(function(e){return e.set("status","finished")}),r=this.model.advance(n.winner),c.saveMatches(r)),this.render(),c.saveGame(_.first(this.model.selected).event(),t),u.save(),!1},t.prototype.fillSelect=function(e,t,n){var r,i,s,o,u;n==null&&(n=null),$("<option></option>").appendTo(this.$(t)),u=[];for(s=0,o=e.length;s<o;s++)r=e[s],i=$("<option></option>").appendTo(this.$(t)).text(r.get("name")),i.text()===n?u.push(i.prop("selected","selected")):u.push(void 0);return u},t.prototype.saveTeam=function(e){var t,n,r,i=this;return r=_.clone(this.model.teams()),t=$(e.currentTarget).val()===""?"TBD":$(e.currentTarget).val(),r[parseInt($(e.currentTarget).attr("slot"))]=this.bracket.get("teams").where({name:t})[0],console.log(r[parseInt($(e.currentTarget).attr("slot"))]),_.each(r,function(e,t){if(e==null)return r[t]=new s}),this.model.teams(r),n=_.map(r,function(e){return e.get("name")}),this.model.event().set("title",n.join(" vs. ")),c.saveMatches(this.model.selected),u.save(),this.render()},t.prototype.renderGroups=function(e){var t,n,r,i,s,o,u;o=this.groups,u=[];for(i=0,s=o.length;i<s;i++)n=o[i],t=$("<option></option>").appendTo(this.$("#group-select")).text(n.name),r=_.findWhere(this.model.event().get("groups"),{slug:n.slug}),r!=null?u.push(t.prop("selected","selected")):u.push(void 0);return u},t.prototype.saveGroups=function(e){var t;return t=$(e.currentTarget).val(),this.model.event().set("groups",_.filter(this.groups,function(e){return _.find(t,function(t){return t===e.name})}))},t.prototype.saveTitle=function(e){return this.model.get("event").set("title",$(e.currentTarget).val()),c.saveEvents(_.map(this.model.selected,function(e){return e.event()})),u.save()},t.prototype.saveBestOf=function(e){return this.model.matchup().set("best_of",parseInt(this.$(e.currentTarget).val())),c.saveMatchups(_.map(this.model.selected,function(e){return e.event()})),u.save()},t.prototype.selectionChanged=function(e){return this.toolbar.openMenu("match-menu"),this.model.selected=e,this.model.set(_.clone(e[0].attributes),{silent:!0}),this.model.newAttrs(),this.render()},t.prototype.saveStream=function(e){var t,n;return n=$(e.currentTarget).val(),t=this.streams.find(function(e){return e.get("name")===n}),t!=null?this.model.get("event").set("stream",{id:t.id,name:n}):this.model.get("event").set("stream",null),c.saveEvents(_.map(this.model.selected,function(e){return e.event()})),u.save()},t.prototype.saveTime=function(e){return this.model.event().set("starts_at",e),this.model.event().set("ends_at",moment(e,"MM/DD/YYYY hh:mm a").add("hours",1).format("YYYY-MM-DDTHH:mm:ssZ")),c.saveEvents(_.map(this.model.selected,function(e){return e.event()})),u.save()},t}(l)}),window.require.register("views/tool-menus/publish-menu-view",function(e,t,n){var r,i,s,o,u,a=function(e,t){return function(){return e.apply(t,arguments)}},f={}.hasOwnProperty,l=function(e,t){function r(){this.constructor=e}for(var n in t)f.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};s=t("views/base/view"),u=t("views/templates/publish-menu"),o=t("mediator"),r=t("utility/brackets/bracket-urls"),n.exports=i=function(e){function t(){return this.selectInput=a(this.selectInput,this),t.__super__.constructor.apply(this,arguments)}return l(t,e),t.prototype.template=u,t.prototype.autoRender=!0,t.prototype.container="#menu-container",t.prototype.id="publish-menu",t.prototype.className="admin-menu publish-menu",t.prototype.events={"click input":function(e){return this.selectInput(e)}},t.prototype.initialize=function(e){var n=this;return t.__super__.initialize.call(this,e),this.bracket=e.bracket,o.subscribe("publish:clicked",function(e){return n.publishShow()}),this.urls={},this.urls.directLink=""},t.prototype.publishShow=function(){return this.toolbar.openMenu("publish-menu"),this.urls.directLink=r.viewBase+"/"+this.bracket.get("slug"),this.render()},t.prototype.selectInput=function(e){return this.$(e.currentTarget).select()},t.prototype.render=function(){return t.__super__.render.apply(this,arguments),this.$el.html(this.template(this.urls)),this},t}(s)}),window.require.register("views/tool-menus/team-menu-view",function(e,t,n){var r,i,s,o,u,a,f,l,c=function(e,t){return function(){return e.apply(t,arguments)}},h={}.hasOwnProperty,p=function(e,t){function r(){this.constructor=e}for(var n in t)h.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};u=t("views/base/view"),r=t("models/base/collection"),l=t("views/templates/team-menu"),s=t("utility/menu-resizer"),f=t("mediator"),i=t("utility/mcclane"),a=t("utility/viper"),n.exports=o=function(e){function t(){return this.loadTeams=c(this.loadTeams,this),this.addTeamToLookup=c(this.addTeamToLookup,this),this.addTeam=c(this.addTeam,this),this.editTeam=c(this.editTeam,this),this.sortUpdate=c(this.sortUpdate,this),t.__super__.constructor.apply(this,arguments)}return p(t,e),t.prototype.template=l,t.prototype.container="#menu-container",t.prototype.id="team-menu",t.prototype.className="admin-menu clearfix",t.prototype.autoRender=!0,t.prototype.events={"click .edit-team":function(e){return this.editTeam(e)},"dblclick .team-label":function(e){return this.editTeam(e)},"blur .team-edit-label input":function(e){return this.saveTeamName(e)},"change #enable-seeding":function(e){return this.model.set("enabled",$(e.currentTarget).prop("checked"))},"click .add-team":function(e){return this.addTeam(e)}},t.prototype.initialize=function(e){return t.__super__.initialize.apply(this,arguments),this.bracket=e.bracket,this.teams=this.bracket.get("teams"),this.listenTo(this.teams,"reset",this.render),this.listenTo(this.teams,"sync",this.render),this.listenTo(this.teams,"change:name",this.render),this.idLookup={},this.loadTeams()},t.prototype.render=function(){var e,n,r=this;return t.__super__.render.apply(this,arguments),n=function(){var t,n,r,i;r=this.teams.models,i=[];for(t=0,n=r.length;t<n;t++)e=r[t],i.push({name:e.get("name")});return i}.call(this),this.$el.html(this.template({teams:n})),this.model!=null&&(this.$("#enable-seeding").prop("checked",this.model.get("enabled")),this.teams.each(function(e){return r.$("li").eq(e.get("seed")-1).data("team",e)}),this.$("#team-sort-list").sortable({update:this.sortUpdate}),this.$("input.team-input").typeahead({source:this.teamlist})),this.teams.each(function(e,t){if(e.id!=null&&r.idLookup[e.get("name")]==null&&!e.get("name").match(/TBD$/))return $('<button class="btn btn-mini btn-warning add-team"><i class="icon-plus"></i></button>').appendTo(r.$("li span.team-label").eq(t))}),s.auto(this.$el),this},t.prototype.sortUpdate=function(e,t){return this.$("li").each(function(){return $(this).data("team").set("seed",$(this).index()+1)}),this.teams.sort(),i.save()},t.prototype.editTeam=function(e){var t;return t=$(e.currentTarget).parents("li"),t.addClass("edit").find("input").focus(),!1},t.prototype.saveTeamName=function(e){var t,n;return n=$(e.currentTarget).parents("li").data("team"),t=_.clone(n.attributes),this.idLookup[$(e.currentTarget).val()]!=null&&n.set("id",this.idLookup[$(e.currentTarget).val()]),n.set("name",$(e.currentTarget).val().trim()),this.model.replaceTeam(t,_.clone(n.attributes)),this.$("li").removeClass("edit"),this.model.retitleSeeds(),i.save(),!1},t.prototype.addTeam=function(e){var t,n,r=this;return t=this.$(e.currentTarget).parent().text().trim(),n=$(e.currentTarget).parents("li").data("team"),delete n.id,a.saveTeam(n,function(){if(n.id!=null)return r.idLookup[n.get("name")]=n.id,r.teamlist.push(n.get("name")),r.render()}),!1},t.prototype.addTeamToLookup=function(){return!0},t.prototype.loadTeams=function(){var e=this;return $.ajax({url:"http://esports.ign.com/content/v2/teams.json?per_page=1000",cached:!0,success:function(t){var n;return e.teamlist=function(){var e,r,i;i=[];for(e=0,r=t.length;e<r;e++)n=t[e],this.idLookup[n.name]=n.id,i.push(n.name);return i}.call(e)}},this.render())},t}(u)}),window.require.register("views/tool-menus/wizard-menu-view",function(e,t,n){var r,i,s,o,u,a,f,l,c,h,p=function(e,t){return function(){return e.apply(t,arguments)}},d={}.hasOwnProperty,v=function(e,t){function r(){this.constructor=e}for(var n in t)d.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};l=t("views/base/view"),h=t("views/templates/wizard-menu"),u=t("collections/brackets/matches"),f=t("collections/brackets/teams"),o=t("utility/brackets/match-pruner"),r=t("models/double-elim-generator"),s=t("utility/fuse-trees"),i=t("utility/brackets/flatten-tree"),a=t("utility/brackets/root-finder"),n.exports=c=function(e){function t(){return this.clickWizard=p(this.clickWizard,this),this.changePlayers=p(this.changePlayers,this),t.__super__.constructor.apply(this,arguments)}return v(t,e),t.prototype.template=h,t.prototype.container="#menu-container",t.prototype.id="wizard-menu",t.prototype.className="admin-menu clearfix",t.prototype.autoRender=!0,t.prototype.events={"change #num-players":function(){return this.changePlayers()},"click .btn-primary":function(){return this.clickWizard()},submit:function(){return!1}},t.prototype.initialize=function(e){return t.__super__.initialize.apply(this,arguments),this.bracket=e.bracket,this.doubleElimGen=new r},t.prototype.changePlayers=function(){return this.model.set("numPlayers",parseInt(this.$("#num-players").val()))},t.prototype.clickWizard=function(){var e,t,n,r;return e=this.model.generate(),r=e,this.$('input:radio[name ="optionsRadios"]:checked').val()==="double"&&(t=this.doubleElimGen.generate(this.model.get("numPlayers"),e),r=i.flatten(s.fuse(a.find(e),a.find(t)))),n=o.prune(r,parseInt(this.$("#num-players").val())),this.bracket.get("matches").reset(n),this.bracket.get("teams").reset(this.model.makeTeams())},t}(l)})